<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.7.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1645272976866-1" author="dimitris (generated)">
        <createTable tableName="account">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ACCOUNT"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="last_transaction" type="DATETIME"/>
        </createTable>
    </changeSet>
    <changeSet id="1645272976866-2" author="dimitris (generated)">
        <createTable tableName="account_user">
            <column name="account_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ACCOUNT_USER"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ACCOUNT_USER"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1645272976866-3" author="dimitris (generated)">
        <createTable tableName="client_user">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_CLIENT_USER"/>
            </column>
            <column name="u_name" type="VARCHAR(255)"/>
            <column name="salt" type="VARCHAR(255)"/>
            <column name="pass" type="VARCHAR(255)"/>
            <column name="f_name" type="VARCHAR(255)"/>
            <column name="s_name" type="VARCHAR(255)"/>
            <column name="comments" type="VARCHAR(255)"/>
            <column name="super_admin" type="BOOLEAN"/>
        </createTable>
    </changeSet>
    <changeSet id="1645272976866-4" author="dimitris (generated)">
        <createTable tableName="permission">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_PERMISSION"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1645272976866-5" author="dimitris (generated)">
        <createTable tableName="token">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_TOKEN"/>
            </column>
            <column name="token" type="VARCHAR(255)"/>
            <column name="user_name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1645272976866-6" author="dimitris (generated)">
        <createTable tableName="transaction">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_TRANSACTION"/>
            </column>
            <column name="amount" type="DECIMAL"/>
            <column name="date" type="DATETIME"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="type" type="INT"/>
            <column name="user_id" type="BIGINT"/>
            <column name="account_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1645272976866-7" author="dimitris (generated)">
        <createTable tableName="user_permission">
            <column name="fk_permission" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_USER_PERMISSION"/>
            </column>
            <column name="fk_user" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_USER_PERMISSION"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1645272976866-8" author="dimitris (generated)">
        <addForeignKeyConstraint baseColumnNames="account_id" baseTableName="account_user"
                                 constraintName="FK_ACCUSE_ON_ACCOUNT" referencedColumnNames="id"
                                 referencedTableName="account"/>
    </changeSet>
    <changeSet id="1645272976866-9" author="dimitris (generated)">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="account_user"
                                 constraintName="FK_ACCUSE_ON_USER" referencedColumnNames="id"
                                 referencedTableName="client_user"/>
    </changeSet>
    <changeSet id="1645272976866-10" author="dimitris (generated)">
        <addForeignKeyConstraint baseColumnNames="account_id" baseTableName="transaction"
                                 constraintName="FK_TRANSACTION_ON_ACCOUNT" referencedColumnNames="id"
                                 referencedTableName="account"/>
    </changeSet>
    <changeSet id="1645272976866-11" author="dimitris (generated)">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="transaction"
                                 constraintName="FK_TRANSACTION_ON_USER" referencedColumnNames="id"
                                 referencedTableName="client_user"/>
    </changeSet>
    <changeSet id="1645272976866-12" author="dimitris (generated)">
        <addForeignKeyConstraint baseColumnNames="fk_permission" baseTableName="user_permission"
                                 constraintName="FK_USEPER_ON_PERMISSION" referencedColumnNames="id"
                                 referencedTableName="permission"/>
    </changeSet>
    <changeSet id="1645272976866-13" author="dimitris (generated)">
        <addForeignKeyConstraint baseColumnNames="fk_user" baseTableName="user_permission"
                                 constraintName="FK_USEPER_ON_USER" referencedColumnNames="id"
                                 referencedTableName="client_user"/>
    </changeSet>

    <changeSet id="1645272976866-14" author="dimitris ">
        <sql>
            INSERT INTO CLIENT_USER (ID, COMMENTS, F_NAME, PASS, S_NAME, SALT, SUPER_ADMIN, U_NAME)
            VALUES (1, '', 'admin', 'def1de41e3e48eff838277272a8f0e5bf9ad6d5807a0905afb76e40490d9da2c', 'admin',
                    'QB5Y2AU', true, 'admin');
            INSERT INTO CLIENT_USER (ID, COMMENTS, F_NAME, PASS, S_NAME, SALT, SUPER_ADMIN, U_NAME)
            VALUES (2, '', 'Jhon', '554ca4fe55ee5d5361bdc5c41feb3c5b9f93afcb6a60098ba3e2c6e365dde249', 'Doe',
                    'IYXN2LC', false, 'JDoe');
            INSERT INTO CLIENT_USER (ID, COMMENTS, F_NAME, PASS, S_NAME, SALT, SUPER_ADMIN, U_NAME)
            VALUES (3, '', 'Sheena', 'a45986f9eb8a65445c62beff2c89abade49787ba1493e8861bb89238a8565071', 'Scott',
                    'PGR4AJD', false, 'SScotts');
            INSERT INTO CLIENT_USER (ID, COMMENTS, F_NAME, PASS, S_NAME, SALT, SUPER_ADMIN, U_NAME)
            VALUES (4, '', 'Lisa', 'b53b8b6c3faad288063df214b7fb8cefa7b63aa3ee8ff75a2f06f5f9728930d8', 'Doe',
                    '1G64AJG', false, 'LDoe');

            INSERT INTO ACCOUNT (ID, DESCRIPTION, LAST_TRANSACTION)
            VALUES (1, 'Does Savings Account', null);
            INSERT INTO ACCOUNT (ID, DESCRIPTION, LAST_TRANSACTION)
            VALUES (2, 'Jhon Does Payroll Account', null);
            INSERT INTO ACCOUNT (ID, DESCRIPTION, LAST_TRANSACTION)
            VALUES (3, 'Unkown Account', null);
            INSERT INTO ACCOUNT (ID, DESCRIPTION, LAST_TRANSACTION)
            VALUES (4, 'Empty Account', null);

            INSERT INTO ACCOUNT_USER (USER_ID, ACCOUNT_ID)
            VALUES (2, 1);
            INSERT INTO ACCOUNT_USER (USER_ID, ACCOUNT_ID)
            VALUES (4, 1);
            INSERT INTO ACCOUNT_USER (USER_ID, ACCOUNT_ID)
            VALUES (2, 2);
            INSERT INTO ACCOUNT_USER (USER_ID, ACCOUNT_ID)
            VALUES (3, 3);

            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (1, 1100, '2021-09-05 09:22:44.634000', 'payroll Aug. Jhon Doe', 1, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (2, 1100, '2021-10-05 09:22:44.634000', 'payroll Sep. Jhon Doe', 1, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (3, 1100, '2021-11-05 09:22:44.634000', 'payroll Okt. Jhon Doe', 1, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (4, 1100, '2021-12-05 09:22:44.634000', 'payroll Nov. Jhon Doe', 1, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (5, 1100, '2022-01-05 09:22:44.634000', 'payroll Dec. Jhon Doe', 1, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (6, 1100, '2022-02-05 09:22:44.634000', 'payroll Jan. Jhon Doe', 1, 2, 2);



            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (7, 70, '2022-09-06 14:21:44.634000', 'monthly savings Sep. 70€', 1, 2, 1);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (8, 80, '2022-10-06 14:21:44.634000', 'monthly savings Okt. 80€', 1, 2, 1);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (9, 80, '2022-11-06 14:21:44.634000', 'monthly savings Nov. 80€', 1, 2, 1);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (10, 60, '2022-12-06 14:21:44.634000', 'monthly savings Dec. 60€', 1, 2, 1);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (11, 70, '2022-01-06 14:21:44.634000', 'monthly savings Jan. 70€', 1, 2, 1);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (12, 90, '2022-02-06 14:21:44.634000', 'monthly savings Feb. 90€', 1, 2, 1);


            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (13, 70, '2022-09-06 14:21:44.634000', 'monthly savings Sep. 70€', 0, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (14, 80, '2022-10-06 14:21:44.634000', 'monthly savings Okt. 80€', 0, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (15, 80, '2022-11-06 14:21:44.634000', 'monthly savings Nov. 80€', 0, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (16, 60, '2022-12-06 14:21:44.634000', 'monthly savings Dec. 60€', 0, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (17, 70, '2022-01-06 14:21:44.634000', 'monthly savings Jan. 70€', 0, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (18, 90, '2022-02-06 14:21:44.634000', 'monthly savings Feb. 90€', 0, 2, 2);

            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (19, 300, '2022-01-15 10:15:21.000000', 'rent Jan. 300€', 0, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (20, 300, '2022-02-15 10:48:44.000000', 'rent Feb. 300€', 0, 2, 2);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (21, 420, '2022-03-01 09:00:00.000000', 'insurance payments. 420€', 0, 2, 2);

            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (22, 50, '2022-01-19 19:00:44.634000', 'monthly savings Jan. 50€', 1, 4, 1);
            INSERT INTO TRANSACTION (ID, AMOUNT, DATE, DESCRIPTION, TYPE, USER_ID, ACCOUNT_ID)
            VALUES (23, 50, '2022-02-19 18:12:20.634000', 'monthly savings Feb. 50€', 1, 4, 1);
        </sql>
    </changeSet>

</databaseChangeLog>
